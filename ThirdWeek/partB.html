<!DOCTYPE html>
<html>
<head>
    <title>Simulazione dei punteggi</title>
    <style>
       
        #frame {
            border: 1px solid #000;
            width: 400px; /* Larghezza iniziale del frame */
            height: 200px; /* Altezza iniziale del frame */
            resize: both;
            overflow: auto;
        }
        .istogramma-container {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            border-top: 1px solid #000;
            height: 100%;
        }
        .barra {
            flex: 1;
            background-color: blue;
            margin: 1px;
        }
    </style>
</head>
<body>
    <h1>Risultati della simulazione</h1>
    <div id="risultati"></div>
    <div id="frame">
        <!-- Aggiungi un contenitore per l'istogramma -->
        <div id="istogramma"></div>
    </div>

    <script>
        const M = 5; // Numero di sistemi di sicurezza
        const N = 10; // Numero di attacchi
        const p = 0.3; // Probabilità di penetrazione costante

        // Inizializza l'array dei punteggi per ogni sistema
        const scores = new Array(M).fill(0);

        // Calcola i dati per le quattro distribuzioni
        const cumulatedFrequency = [];
        const relativeFrequency = [];
        const normalizedRatio = [];

        for (let attack = 0; attack < N; attack++) {
            let cumulativePenetration = 0;
            for (let system = 0; system < M; system++) {
                const outcome = Math.random();
                if (outcome <= p) {
                    scores[system] -= 1;
                    cumulativePenetration += 1;
                } else {
                    scores[system] += 1;
                }
            }
            cumulatedFrequency.push(cumulativePenetration);
            relativeFrequency.push(cumulativePenetration / (attack + 1));
            normalizedRatio.push(cumulativePenetration / Math.sqrt(attack + 1));
        }

        // Riferimento all'elemento HTML in cui visualizzerai i risultati
        const risultatiDiv = document.getElementById("risultati");

        // Creazione di un elemento <p> per ogni punteggio e aggiunta al div dei risultati
        for (let system = 0; system < M; system++) {
            const punteggio = scores[system];
            const risultatoElement = document.createElement("p");
            risultatoElement.textContent = `Punteggio del sistema ${system + 1}: ${punteggio}`;
            risultatiDiv.appendChild(risultatoElement);
        }

        // Visualizza l'istogramma all'interno del frame
        const istogrammaDiv = document.getElementById("istogramma");
        istogrammaDiv.style.width = "100%"; // L'istogramma riempirà tutto il frame

        // Funzione per creare un istogramma
        function createHistogram(data, title) {
            const istogrammaContainer = document.createElement("div");
            istogrammaContainer.classList.add("istogramma-container");

            for (let i = 0; i < N; i++) {
                const barra = document.createElement("div");
                barra.classList.add("barra");
                barra.style.height = `${(data[i] * 5)}px`; // Scala per una migliore visualizzazione
                istogrammaContainer.appendChild(barra);
            }

            // Aggiungi il titolo dell'istogramma
            const titolo = document.createElement("p");
            titolo.textContent = title;
            istogrammaContainer.appendChild(titolo);

            istogrammaDiv.appendChild(istogrammaContainer);
        }

        // Crea gli istogrammi per le quattro distribuzioni
        createHistogram(cumulatedFrequency, "Cumulated Frequency");
        createHistogram(relativeFrequency, "Relative Frequency (f/number of attacks)");
        createHistogram(normalizedRatio, "Normalized Ratio (f/ √number of attacks)");
    </script>
</body>
</html>
